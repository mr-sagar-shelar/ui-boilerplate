# Agent: `component-handlers`

## Description

The `component-handlers` agent creates API mock handlers using Mock Service Worker (MSW). These handlers are driven by the canonical mock data generated by the `component-mock-data` agent and are essential for creating deterministic and reliable tests.

## Purpose

- **Mocks API Endpoints**: Generates a set of MSW handlers that intercept network requests and return predictable, mocked responses.
- **Connects Mocks to Scenarios**: Creates different sets of handlers (`positive`, `negative`, `empty`, `edgeCases`) that correspond directly to the structures in the mock data file.
- **Enables Test Isolation**: Allows unit, integration, and end-to-end tests to run without depending on a live backend, making them faster and more reliable.

## Inputs

- The name of the component.
- The path to the component's mock data file.

## Outputs

- **/packages/ui/src/component/{ComponentName}/{ComponentName}.handlers.ts**: A file exporting an object containing arrays of MSW handlers for different scenarios.

## Example Prompt

This is the standardized prompt for generating MSW handlers for the `UserProfile` component.

```markdown
Generate MSW (Mock Service Worker) API handlers for the "UserProfile" component.

**Source of Truth**:
-   Mock data from `/packages/ui/src/component/UserProfile/UserProfile.mock.ts`.

**Output File**:
-   `/packages/ui/src/component/UserProfile/UserProfile.handlers.ts`

**API Endpoints to Mock**:
-   `GET /api/user-profile` (List of users)
-   `GET /api/user-profile/:id` (Single user)
-   `PUT /api/user-profile/:id` (Update user)
-   `POST /api/user-profile` (Create user)

**Requirements**:

1.  **GET (Single User)**:
    *   Create a handler for `GET /api/user-profile/:id`.
    *   If the ID matches `mocks.valid.admin.id`, return a 200 status with the `mocks.valid.admin` data.
    *   If the ID is `'not-found'`, return a 404 status with an error message.
2.  **GET (User List)**:
    *   Create a handler for `GET /api/user-profile`.
    *   Return a 200 status with an array containing `mocks.valid.admin` and `mocks.valid.viewer`.
3.  **PUT (Update User)**:
    *   Create a handler for `PUT /api/user-profile/:id`.
    *   If the request body is valid, return a 200 status with the updated data.
    *   If the request body is invalid (e.g., `mocks.invalid.badEmail`), return a 400 status with a validation error message.
4.  **POST (Create User)**:
    *   Create a handler for `POST /api/user-profile`.
    *   If the request is successful, return a 201 status and the newly created user data.
5.  **Organization**: Export all handlers in a single array named `userProfileHandlers`.
```
